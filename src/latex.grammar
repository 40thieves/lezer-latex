@top[name=LaTeX] { (text | command | Math)+ }

@skip { space }

command {
  BeginCommand |
  EndCommand |
  Command
}

Command { backslash text Options? Arguments? }

BeginCommand { backslash @extend<text, "begin"> Options? EnvironmentName }
EndCommand { backslash @extend<text, "end"> Options? EnvironmentName }

Options { "[" text? "]" }

Arguments { "{" text? "}" }

EnvironmentName { "{" text "}" }

Math { "$" (text | Command)? "$" }

@tokens {
  space { std.whitespace+ }

  backslash { "\\" }
  text { std.asciiLetter+ }
}
